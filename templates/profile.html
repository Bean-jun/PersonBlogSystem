{% extends 'layout/base.html' %}
{% load profile %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'plugin/editor-md/css/editormd.preview.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock css %}

{% block js %}
    <script type="text/javascript">
        $(function () {
            // 处理用户头像
            $('.image-btn-prev').change(function () {
                $('#imageSubmit').click();
            });

            // 处理模态框
            $('#addModal').on('show.bs.modal', function (e) {
                var button = $(e.relatedTarget)
                var name = button.data('name');
                var modal = $(this);
                modal.find('.modal-title').text(name);

            });
        });
    </script>
{% endblock js %}


{% block title %}profile{% endblock title %}


{% block content %}
    <div class="row" style="margin-bottom: 100px">
        <div class="col-md-3 col-sm-4 hidden-xs left">
            {#            个人简介#}
            <table class="table">
                <tr>
                    <a href="#" class="image-btn">
                        <img style="height: 254px;
                                width: 254px;
                                margin-top: 10px;
                                margin-bottom: 45px;
                                border-radius: 50%;"
                             src="{{ request.user.image }}" alt="头像"/>
                    </a>
                    <form method="post" action="{% url 'blog:user_image' %}" enctype="multipart/form-data">
                        <input type="file" class="image-btn-prev" name="image">
                        <input type="submit" id="imageSubmit" class="hide" value="upload">
                    </form>
                </tr>
                <tr>
                    <th>{{ request.user.username|title }}</th>
                </tr>
                <tr>
                    <th>邮箱：</th>
                    <th>{{ request.user.email }}</th>
                </tr>
            </table>
            {% if request.user.is_super %}
                {#添加外链音乐#}
                <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=255 height=52
                        src="//music.163.com/outchain/player?type=0&id=454995617&auto=0&height=32"></iframe>

            {% endif %}

        </div>
        {#        {% comment %}#}
        <div class="col-md-9 col-sm-8 right">
            {% if request.user.is_super %}
                {#管理员区域#}
                <!--
                1、修改头像
                2、修改音乐播放ID
                -->
                <div class="page-header" style="margin: 40px 15px 20px;">
                    <div>
                        <h4>
                            <span>音乐设置</span>
                            <span style="float: right"><a class="btn btn-success" href="#" role="button"
                                                          data-toggle="modal" data-target="#addModal" data-name="添加音乐">
                                添加音乐</a></span>
                        </h4>
                    </div>

                </div>
                <table class="table table-condensed" style="margin-left: 15px;">
                    <thead>
                    <tr>
                        <th>歌曲ID</th>
                        <th>歌曲标题</th>
                        <th>歌单设置</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>123123</td>
                        <td>2021最热榜单</td>
                        <td>
                            <a class="btn btn-success btn-xs" href="#" role="button">播放</a>
                            <a class="btn btn-danger btn-xs" href="#" role="button">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td>123124</td>
                        <td>2020最热榜单</td>
                        <td>
                            <a class="btn btn-success btn-xs" href="#" role="button">播放</a>
                            <a class="btn btn-danger btn-xs" href="#" role="button">删除</a>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <div class="page-header" style="margin: 60px 15px 20px;">
                    <h4>
                        <span>博客分类</span>
                        <span style="float: right"><a class="btn btn-success" href="#" role="button"
                                                      data-toggle="modal" data-target="#addModal" data-name="添加分类">
                            添加分类</a></span>
                    </h4>
                </div>
                <div style="margin: 40px 15px 20px;">
                <div class="panel panel-default col-xs-2">
                    <div class="panel-body" style="text-align: center">
                        java
                    </div>
                </div>
                <div class="panel panel-default col-xs-2">
                    <div class="panel-body" style="text-align: center">
                        java
                    </div>
                </div>
            {% else %}
                {# 这里放置用户评论 #}
                <!--
                1、修改头像
                2、查看评论过的文章
                -->
            {% endif %}
            </div>
            {#        {% endcomment %}#}
        </div>
    </div>
    <!-- 音乐及分类添加栏 -->
    <div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="addModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addModal">Modal title</h4>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取 消</button>
                    <button type="button" class="btn btn-primary">确 定</button>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}